(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[537],{667:(e,t,r)=>{"use strict";r.d(t,{t:()=>i,v:()=>o});var s=r(7089),a=r(7396),l=r(3869);function i(e){let{isDisabled:t,isInvalid:r,isReadOnly:a,isRequired:l,...i}=o(e);return{...i,disabled:t,readOnly:a,required:l,"aria-invalid":(0,s.r)(r),"aria-required":(0,s.r)(l),"aria-readonly":(0,s.r)(a)}}function o(e){let t=(0,l.Uc)(),{id:r,disabled:s,readOnly:i,required:o,isRequired:n,isInvalid:d,isReadOnly:c,isDisabled:u,onFocus:p,onBlur:x,...b}=e,h=e["aria-describedby"]?[e["aria-describedby"]]:[];return t?.hasFeedbackText&&t?.isInvalid&&h.push(t.feedbackId),t?.hasHelpText&&h.push(t.helpTextId),{...b,"aria-describedby":h.join(" ")||void 0,id:r??t?.id,isDisabled:s??u??t?.isDisabled,isReadOnly:i??c??t?.isReadOnly,isRequired:o??n??t?.isRequired,isInvalid:d??t?.isInvalid,onFocus:(0,a.H)(t?.onFocus,p),onBlur:(0,a.H)(t?.onBlur,x)}}},2736:(e,t,r)=>{"use strict";r.d(t,{D:()=>d});var s=r(7876),a=r(9185),l=r(5255),i=r(9461),o=r(4013),n=r(6044);let d=(0,i.R)(function(e,t){let r=(0,o.V)("Heading",e),{className:i,...d}=(0,a.M)(e);return(0,s.jsx)(n.B.h2,{ref:t,className:(0,l.cx)("chakra-heading",e.className),...d,__css:r})});d.displayName="Heading"},3274:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/reset-password",function(){return r(9903)}])},3611:(e,t,r)=>{"use strict";r.d(t,{db:()=>u,j:()=>c});var s=r(6042),a=r(9917),l=r(2964),i=r(5226),o=r(5364);let n={apiKey:o.env.NEXT_PUBLIC_FIREBASE_API_KEY||"AIzaSyDtZQ_gX9xWqGQgxQMBzTH8c9o6t-ZsvKc",authDomain:o.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN||"raoteebaan.firebaseapp.com",databaseURL:o.env.NEXT_PUBLIC_FIREBASE_DATABASE_URL||"https://raoteebaan-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:o.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID||"raoteebaan",storageBucket:o.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET||"raoteebaan.appspot.com",messagingSenderId:o.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID||"986271509277",appId:o.env.NEXT_PUBLIC_FIREBASE_APP_ID||"1:986271509277:web:ff35142f2eabe2063c0ff4",measurementId:o.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID||"G-YW7ZP3B4TC"},d=(0,s.Dk)().length?(0,s.Dk)()[0]:(0,s.Wp)(n),c=(0,a.xI)(d),u=(0,l.aU)(d);(0,i.c7)(d)},3869:(e,t,r)=>{"use strict";r.d(t,{MJ:()=>m,TP:()=>b,Uc:()=>f});var s=r(7876),a=r(3968),l=r(9185),i=r(6229),o=r(7089),n=r(5255),d=r(4232),c=r(9461),u=r(4013),p=r(6044);let[x,b]=(0,i.q)({name:"FormControlStylesContext",errorMessage:"useFormControlStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<FormControl />\" "}),[h,f]=(0,i.q)({strict:!1,name:"FormControlContext"}),m=(0,c.R)(function(e,t){let r=(0,u.o)("Form",e),{getRootProps:i,htmlProps:c,...b}=function(e){let{id:t,isRequired:r,isInvalid:s,isDisabled:l,isReadOnly:i,...n}=e,c=(0,d.useId)(),u=t||`field-${c}`,p=`${u}-label`,x=`${u}-feedback`,b=`${u}-helptext`,[h,f]=(0,d.useState)(!1),[m,_]=(0,d.useState)(!1),[g,j]=(0,d.useState)(!1),v=(0,d.useCallback)((e={},t=null)=>({id:b,...e,ref:(0,a.Px)(t,e=>{e&&_(!0)})}),[b]),y=(0,d.useCallback)((e={},t=null)=>({...e,ref:t,"data-focus":(0,o.s)(g),"data-disabled":(0,o.s)(l),"data-invalid":(0,o.s)(s),"data-readonly":(0,o.s)(i),id:void 0!==e.id?e.id:p,htmlFor:void 0!==e.htmlFor?e.htmlFor:u}),[u,l,g,s,i,p]),E=(0,d.useCallback)((e={},t=null)=>({id:x,...e,ref:(0,a.Px)(t,e=>{e&&f(!0)}),"aria-live":"polite"}),[x]),I=(0,d.useCallback)((e={},t=null)=>({...e,...n,ref:t,role:"group","data-focus":(0,o.s)(g),"data-disabled":(0,o.s)(l),"data-invalid":(0,o.s)(s),"data-readonly":(0,o.s)(i)}),[n,l,g,s,i]);return{isRequired:!!r,isInvalid:!!s,isReadOnly:!!i,isDisabled:!!l,isFocused:!!g,onFocus:()=>j(!0),onBlur:()=>j(!1),hasFeedbackText:h,setHasFeedbackText:f,hasHelpText:m,setHasHelpText:_,id:u,labelId:p,feedbackId:x,helpTextId:b,htmlProps:n,getHelpTextProps:v,getErrorMessageProps:E,getRootProps:I,getLabelProps:y,getRequiredIndicatorProps:(0,d.useCallback)((e={},t=null)=>({...e,ref:t,role:"presentation","aria-hidden":!0,children:e.children||"*"}),[])}}((0,l.M)(e)),f=(0,n.cx)("chakra-form-control",e.className);return(0,s.jsx)(h,{value:b,children:(0,s.jsx)(x,{value:r,children:(0,s.jsx)(p.B.div,{...i({},t),className:f,__css:r.container})})})});m.displayName="FormControl",(0,c.R)(function(e,t){let r=f(),a=b(),l=(0,n.cx)("chakra-form__helper-text",e.className);return(0,s.jsx)(p.B.div,{...r?.getHelpTextProps(e,t),__css:a.helperText,className:l})}).displayName="FormHelperText"},5377:(e,t,r)=>{"use strict";r.d(t,{d:()=>d});var s=r(4232),a=r(3446),l=r(8259),i=r(1294),o=r(3519),n=r(6674);function d(e){let{theme:t}=(0,n.UQ)(),r=(0,o.NU)();return(0,s.useMemo)(()=>(function(e,t){let r=r=>({...t,...r,position:function(e,t){let r=e??"bottom";return({"top-start":{ltr:"top-left",rtl:"top-right"},"top-end":{ltr:"top-right",rtl:"top-left"},"bottom-start":{ltr:"bottom-left",rtl:"bottom-right"},"bottom-end":{ltr:"bottom-right",rtl:"bottom-left"}})[r]?.[t]??r}(r?.position??t?.position,e)}),s=e=>{let t=r(e),s=(0,l.q)(t);return i.Z.notify(s,t)};return s.update=(e,t)=>{i.Z.update(e,r(t))},s.promise=(e,t)=>{let r=s({...t.loading,status:"loading",duration:null});e.then(e=>s.update(r,{status:"success",duration:5e3,...(0,a.J)(t.success,e)})).catch(e=>s.update(r,{status:"error",duration:5e3,...(0,a.J)(t.error,e)}))},s.closeAll=i.Z.closeAll,s.close=i.Z.close,s.isActive=i.Z.isActive,s})(t.direction,{...r,...e}),[e,t.direction,r])}},6491:(e,t,r)=>{"use strict";r.d(t,{p:()=>c});var s=r(7876),a=r(9185),l=r(5255),i=r(667),o=r(9461),n=r(4013),d=r(6044);let c=(0,o.R)(function(e,t){let{htmlSize:r,...o}=e,c=(0,n.o)("Input",o),u=(0,a.M)(o),p=(0,i.t)(u),x=(0,l.cx)("chakra-input",e.className);return(0,s.jsx)(d.B.input,{size:r,...p,__css:c.field,ref:t,className:x})});c.displayName="Input",c.id="Input"},6676:(e,t,r)=>{"use strict";r.d(t,{l:()=>c});var s=r(7876),a=r(9185),l=r(5255),i=r(3869),o=r(9461),n=r(4013),d=r(6044);let c=(0,o.R)(function(e,t){let r=(0,n.V)("FormLabel",e),o=(0,a.M)(e),{className:c,children:p,requiredIndicator:x=(0,s.jsx)(u,{}),optionalIndicator:b=null,...h}=o,f=(0,i.Uc)(),m=f?.getLabelProps(h,t)??{ref:t,...h};return(0,s.jsxs)(d.B.label,{...m,className:(0,l.cx)("chakra-form__label",o.className),__css:{display:"block",textAlign:"start",...r},children:[p,f?.isRequired?x:b]})});c.displayName="FormLabel";let u=(0,o.R)(function(e,t){let r=(0,i.Uc)(),a=(0,i.TP)();if(!r?.isRequired)return null;let o=(0,l.cx)("chakra-form__required-indicator",e.className);return(0,s.jsx)(d.B.span,{...r?.getRequiredIndicatorProps(e,t),__css:a.requiredIndicator,className:o})});u.displayName="RequiredIndicator"},8443:(e,t,r)=>{"use strict";r.d(t,{o:()=>i});var s=r(7876),a=r(6044),l=r(9461);let i=(0,a.B)("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center"}});i.displayName="Center";let o={horizontal:{insetStart:"50%",transform:"translateX(-50%)"},vertical:{top:"50%",transform:"translateY(-50%)"},both:{insetStart:"50%",top:"50%",transform:"translate(-50%, -50%)"}};(0,l.R)(function(e,t){let{axis:r="both",...l}=e;return(0,s.jsx)(a.B.div,{ref:t,__css:o[r],...l,position:"absolute"})})},9099:(e,t,r)=>{e.exports=r(8253)},9903:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>T});var s=r(7876),a=r(4232),l=r(9099),i=r(3611),o=r(9917),n=r(5377),d=r(8443),c=r(1362),u=r(851),p=r(1921),x=r(9185),b=r(5255),h=r(9461),f=r(4013),m=r(6044);let _=(0,h.R)(function(e,t){let{className:r,centerContent:a,...l}=(0,x.M)(e),i=(0,f.V)("Container",e);return(0,s.jsx)(m.B.div,{ref:t,className:(0,b.cx)("chakra-container",r),...l,__css:{...i,...a&&{display:"flex",flexDirection:"column",alignItems:"center"}}})});_.displayName="Container";var g=r(9955),j=r(6923),v=r(3149),y=r(9218),E=r(2902),I=r(5812),C=r(2736),R=r(3869),S=r(6676),N=r(6491),B=r(2870);function T(){let e=(0,l.useRouter)(),[t,r]=(0,a.useState)(""),[x,b]=(0,a.useState)(""),[h,f]=(0,a.useState)(!1),[m,T]=(0,a.useState)(!0),[A,k]=(0,a.useState)(!1),[F,P]=(0,a.useState)(!1),[w,U]=(0,a.useState)(!1),D=(0,n.d)();(0,a.useEffect)(()=>{let{oobCode:t}=e.query;t&&"string"==typeof t?(0,o.RE)(i.j,t).then(e=>{k(!0),T(!1)}).catch(e=>{console.error("Error verifying reset code:",e),k(!1),T(!1)}):T(!1)},[e.query]);let q=async()=>{if(t!==x)return void D({title:"รหัสผ่านไม่ตรงกัน",description:"กรุณากรอกรหัสผ่านให้ตรงกัน",status:"error",duration:3e3,isClosable:!0});if(t.length<6)return void D({title:"รหัสผ่านสั้นเกินไป",description:"รหัสผ่านต้องมีอย่างน้อย 6 ตัวอักษร",status:"error",duration:3e3,isClosable:!0});f(!0);let{oobCode:r}=e.query;try{r&&"string"==typeof r&&(await (0,o.R4)(i.j,r,t),D({title:"ตั้งรหัสผ่านสำเร็จ",description:"คุณสามารถเข้าสู่ระบบด้วยรหัสผ่านใหม่ได้แล้ว",status:"success",duration:5e3,isClosable:!0}),setTimeout(()=>{e.push("/login")},2e3))}catch(e){console.error("Error resetting password:",e),D({title:"เกิดข้อผิดพลาด",description:e.message||"ไม่สามารถตั้งรหัสผ่านได้",status:"error",duration:5e3,isClosable:!0})}finally{f(!1)}};return m?(0,s.jsx)(d.o,{minH:"100vh",bgGradient:"linear(to-br, #e3f2fd, #bbdefb)",children:(0,s.jsxs)(c.T,{spacing:4,children:[(0,s.jsx)(u.y,{color:"blue.400",size:"xl"}),(0,s.jsx)(p.E,{color:"blue.600",fontSize:"lg",children:"กำลังตรวจสอบลิงก์..."})]})}):A?(0,s.jsx)(d.o,{minH:"100vh",bgGradient:"linear(to-br, #e3f2fd, #bbdefb)",children:(0,s.jsx)(_,{maxW:"md",children:(0,s.jsx)(g.a,{bg:"white",borderRadius:"2xl",p:8,boxShadow:"xl",border:"1.5px solid #e3f2fd",children:(0,s.jsxs)(c.T,{spacing:6,children:[(0,s.jsxs)(c.T,{spacing:2,children:[(0,s.jsx)(g.a,{bg:"blue.100",p:4,borderRadius:"full",color:"blue.600",children:(0,s.jsx)(B.JhU,{size:"2xl"})}),(0,s.jsx)(C.D,{color:"blue.600",fontSize:"2xl",textAlign:"center",children:"ตั้งรหัสผ่านใหม่"}),(0,s.jsx)(p.E,{color:"gray.600",textAlign:"center",children:"กรุณากรอกรหัสผ่านใหม่สำหรับบัญชีของคุณ"})]}),(0,s.jsxs)(c.T,{spacing:4,w:"full",children:[(0,s.jsxs)(R.MJ,{children:[(0,s.jsx)(S.l,{color:"gray.700",children:"รหัสผ่านใหม่"}),(0,s.jsxs)(g.a,{position:"relative",children:[(0,s.jsx)(N.p,{type:F?"text":"password",value:t,onChange:e=>r(e.target.value),placeholder:"รหัสผ่านใหม่",pr:"3rem",borderRadius:"xl",border:"1.5px solid",borderColor:"gray.200",_focus:{borderColor:"blue.400",boxShadow:"0 0 0 1px #3182ce"}}),(0,s.jsx)(I.$,{position:"absolute",right:"0.5rem",top:"50%",transform:"translateY(-50%)",variant:"ghost",size:"sm",onClick:()=>P(!F),color:"gray.500",children:F?(0,s.jsx)(B.mx3,{}):(0,s.jsx)(B.Ny1,{})})]})]}),(0,s.jsxs)(R.MJ,{children:[(0,s.jsx)(S.l,{color:"gray.700",children:"ยืนยันรหัสผ่านใหม่"}),(0,s.jsxs)(g.a,{position:"relative",children:[(0,s.jsx)(N.p,{type:w?"text":"password",value:x,onChange:e=>b(e.target.value),placeholder:"ยืนยันรหัสผ่านใหม่",pr:"3rem",borderRadius:"xl",border:"1.5px solid",borderColor:"gray.200",_focus:{borderColor:"blue.400",boxShadow:"0 0 0 1px #3182ce"}}),(0,s.jsx)(I.$,{position:"absolute",right:"0.5rem",top:"50%",transform:"translateY(-50%)",variant:"ghost",size:"sm",onClick:()=>U(!w),color:"gray.500",children:w?(0,s.jsx)(B.mx3,{}):(0,s.jsx)(B.Ny1,{})})]})]})]}),(0,s.jsx)(I.$,{colorScheme:"blue",size:"lg",w:"full",onClick:q,isLoading:h,borderRadius:"xl",fontWeight:"bold",leftIcon:(0,s.jsx)(B.JhU,{}),children:"ตั้งรหัสผ่านใหม่"}),(0,s.jsx)(p.E,{fontSize:"sm",color:"gray.500",textAlign:"center",children:"\uD83D\uDCA1 รหัสผ่านต้องมีอย่างน้อย 6 ตัวอักษร"})]})})})}):(0,s.jsx)(d.o,{minH:"100vh",bgGradient:"linear(to-br, #e3f2fd, #bbdefb)",children:(0,s.jsx)(_,{maxW:"md",children:(0,s.jsx)(g.a,{bg:"white",borderRadius:"2xl",p:8,boxShadow:"xl",border:"1.5px solid #e3f2fd",children:(0,s.jsxs)(c.T,{spacing:6,children:[(0,s.jsxs)(j.F,{status:"error",borderRadius:"xl",children:[(0,s.jsx)(v._,{}),(0,s.jsxs)(g.a,{children:[(0,s.jsx)(y.X,{children:"ลิงก์ไม่ถูกต้องหรือหมดอายุ"}),(0,s.jsx)(E.T,{children:"ลิงก์ตั้งรหัสผ่านไม่ถูกต้องหรือหมดอายุแล้ว กรุณาติดต่อผู้ดูแลระบบ"})]})]}),(0,s.jsx)(I.$,{colorScheme:"blue",onClick:()=>e.push("/login"),borderRadius:"xl",fontWeight:"bold",w:"full",children:"กลับไปหน้าเข้าสู่ระบบ"})]})})})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[671,871,465,636,593,792],()=>t(3274)),_N_E=e.O()}]);