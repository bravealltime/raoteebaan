(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[368],{1150:(e,r,l)=>{"use strict";l.r(r),l.d(r,{default:()=>V});var t=l(7876),a=l(4836),o=l(5377),s=l(8443),n=l(851),i=l(9955),c=l(9803),d=l(1921),x=l(5812),u=l(6491),h=l(9035),g=l(1626),m=l(485),b=l(3642),j=l(4306),p=l(1454),f=l(184),y=l(2426),S=l(8965),v=l(7961),C=l(5539),z=l(6078),w=l(4275),R=l(8072),E=l(5162),I=l(2445),_=l(4232),T=l(3611),N=l(2964),k=l(8387),D=l(7523),F=l(4747),W=l(3031),A=l(2870);let B={paid:{color:"green",label:"PAID",bg:"green.100",text:"green.700"},unpaid:{color:"red",label:"UNPAID",bg:"red.100",text:"red.700"},pending:{color:"orange",label:"PENDING",bg:"orange.100",text:"orange.700"},complete:{color:"green",label:"COMPLETE",bg:"green.100",text:"green.700"}};function H(e){let{id:r,status:l,tenantName:a,area:o,latestTotal:s,electricity:n,water:x,rent:u,service:h,overdueDays:g,dueDate:b,billStatus:j="paid",onViewBill:p,onAddData:f,onDelete:y,onSettings:S}=e,v=B[j]||B.paid;return(0,t.jsxs)(i.a,{bg:"white",borderRadius:"2xl",border:"1.5px solid #e3f2fd",boxShadow:"0 4px 24px 0 rgba(33,150,243,0.12)",p:4,minW:"220px",maxW:"260px",w:"full",minH:"320px",display:"flex",flexDirection:"column",gap:1,transition:"box-shadow 0.15s",_hover:{boxShadow:"0 8px 32px 0 rgba(33,150,243,0.18)"},position:"relative",m:0,children:[(0,t.jsx)(k.I,{as:A.TlC,color:"blue.100",boxSize:24,position:"absolute",top:-2,right:-2,zIndex:0,opacity:.18,pointerEvents:"none"}),(0,t.jsxs)(c.s,{align:"center",gap:2,mb:1,zIndex:1,children:[(0,t.jsx)(k.I,{as:A.Ivg,color:"blue.300",boxSize:5}),(0,t.jsxs)(d.E,{fontWeight:"bold",fontSize:"lg",color:"blue.700",children:["Room ",r]}),(0,t.jsx)(D.E,{colorScheme:"occupied"===l?"green":"gray",borderRadius:"full",px:2,fontSize:"xs",bg:"occupied"===l?"green.100":"gray.100",color:"occupied"===l?"green.700":"gray.600",children:"occupied"===l?"มีคนอยู่":"ว่าง"})]}),(0,t.jsxs)(c.s,{align:"center",gap:2,mb:1,zIndex:1,children:[(0,t.jsx)(k.I,{as:A.x$1,color:"gray.300",boxSize:4}),(0,t.jsx)(d.E,{color:"gray.600",fontSize:"sm",noOfLines:1,children:a})]}),(0,t.jsxs)(c.s,{align:"center",gap:2,mb:1,zIndex:1,children:[(0,t.jsx)(k.I,{as:A.bfZ,color:"gray.300",boxSize:4}),(0,t.jsxs)(d.E,{color:"gray.400",fontSize:"xs",children:["ขนาด ",o," ตร.ม."]}),b&&(0,t.jsxs)(d.E,{color:"blue.400",fontSize:"xs",ml:2,children:["ครบกำหนด: ",b]})]}),(0,t.jsx)(F.c,{my:1,borderColor:"gray.100"}),(0,t.jsx)(c.s,{align:"center",gap:2,mb:1,zIndex:1,children:(0,t.jsx)(D.E,{bg:v.bg,color:v.text,borderRadius:"full",fontSize:"xs",px:2,children:v.label})}),(0,t.jsx)(i.a,{bg:"blue.50",borderRadius:"lg",py:2,px:2,my:1,zIndex:1,boxShadow:"sm",children:(0,t.jsxs)(d.E,{color:"gray.800",fontWeight:"bold",fontSize:"2xl",textAlign:"center",children:["฿",s.toLocaleString("th-TH",{minimumFractionDigits:2})]})}),(0,t.jsx)(F.c,{my:1,borderColor:"gray.100"}),(0,t.jsxs)(c.s,{align:"center",gap:2,mb:1,zIndex:1,justify:"space-between",children:[(0,t.jsx)(W.m,{label:"ค่าไฟฟ้า",fontSize:"xs",children:(0,t.jsxs)(d.E,{color:"gray.500",fontSize:"xs",children:["ไฟ: ฿",n.toLocaleString("th-TH",{minimumFractionDigits:2})]})}),(0,t.jsx)(W.m,{label:"ค่าน้ำ",fontSize:"xs",children:(0,t.jsxs)(d.E,{color:"gray.500",fontSize:"xs",children:["น้ำ: ฿",x.toLocaleString("th-TH",{minimumFractionDigits:2})]})}),(0,t.jsx)(W.m,{label:"ค่าเช่า",fontSize:"xs",children:(0,t.jsxs)(d.E,{color:"gray.500",fontSize:"xs",children:["เช่า: ฿",u.toLocaleString("th-TH",{minimumFractionDigits:2})]})}),(0,t.jsx)(W.m,{label:"ค่าบริการ",fontSize:"xs",children:(0,t.jsxs)(d.E,{color:"gray.500",fontSize:"xs",children:["บริการ: ฿",h.toLocaleString("th-TH",{minimumFractionDigits:2})]})})]}),g>0&&(0,t.jsxs)(d.E,{color:"red.400",fontSize:"xs",fontWeight:"bold",zIndex:1,children:["เกินกำหนด ",g," วัน"]}),(0,t.jsx)(F.c,{my:1,borderColor:"gray.100"}),(0,t.jsxs)(c.s,{align:"center",justify:"space-between",mt:"auto",gap:2,zIndex:1,bg:"gray.50",borderRadius:"xl",py:2,px:2,boxShadow:"sm",children:[(0,t.jsx)(W.m,{label:"เพิ่มข้อมูลใหม่",fontSize:"xs",hasArrow:!0,placement:"top",children:(0,t.jsx)(m.K,{"aria-label":"เพิ่มข้อมูล",icon:(0,t.jsx)(A.OiG,{}),colorScheme:"teal",variant:"ghost",borderRadius:"full",size:"md",_hover:{bg:"teal.100",color:"teal.600",transform:"scale(1.08)"},onClick:f})}),(0,t.jsx)(W.m,{label:"ดูใบแจ้งค่าใช้จ่าย",fontSize:"xs",hasArrow:!0,placement:"top",children:(0,t.jsx)(m.K,{"aria-label":"ดูใบแจ้งค่าใช้จ่าย",icon:(0,t.jsx)(A.TlC,{}),colorScheme:"blue",variant:"ghost",borderRadius:"full",size:"md",_hover:{bg:"blue.50",color:"blue.600",transform:"scale(1.08)"},onClick:p})}),S&&(0,t.jsx)(W.m,{label:"ตั้งค่าห้อง",fontSize:"xs",hasArrow:!0,placement:"top",children:(0,t.jsx)(m.K,{"aria-label":"ตั้งค่าห้อง",icon:(0,t.jsx)(A.Pcn,{}),size:"md",colorScheme:"gray",variant:"ghost",borderRadius:"full",_hover:{bg:"gray.200",color:"gray.700",transform:"scale(1.08)"},onClick:S})}),y&&(0,t.jsx)(W.m,{label:"ลบห้องนี้",fontSize:"xs",hasArrow:!0,placement:"top",children:(0,t.jsx)(m.K,{"aria-label":"ลบการ์ด",icon:(0,t.jsx)(A.qbC,{}),size:"md",colorScheme:"red",variant:"ghost",borderRadius:"full",_hover:{bg:"red.100",color:"red.600",transform:"scale(1.08)"},onClick:y})})]})]})}var L=l(9736),P=l(479);function $(e){let{isOpen:r,onClose:l,onAdd:a,lastWaterMeter:o,lastElecMeter:s}=e,[n,c]=(0,_.useState)(""),[d,h]=(0,_.useState)(""),[g,m]=(0,_.useState)(0),[b,j]=(0,_.useState)(0),[R,E]=(0,_.useState)(null),[I,T]=(0,_.useState)(null),[N,k]=(0,_.useState)(0),[D,F]=(0,_.useState)(void 0),[W,B]=(0,_.useState)(0),[H,$]=(0,_.useState)(0),[O,K]=(0,_.useState)(0),[U,G]=(0,_.useState)(void 0),[M,X]=(0,_.useState)(0),[Y,Q]=(0,_.useState)(0),[J,V]=(0,_.useState)([]);(0,_.useEffect)(()=>{r&&(F(void 0!==o?o:0),G(void 0!==s?s:0))},[r,o,s]);let Z=(e,r,l)=>{V(t=>t.map((t,a)=>a===e?{...t,[r]:l}:t))},q=e=>{V(r=>r.filter((r,l)=>l!==e))};return(0,t.jsxs)(f.aF,{isOpen:r,onClose:l,isCentered:!0,size:"2xl",children:[(0,t.jsx)(y.m,{}),(0,t.jsxs)(S.$,{borderRadius:"2xl",p:4,maxH:"98vh",maxW:"1200px",minH:"700px",overflowY:"visible",bg:"white",children:[(0,t.jsx)(v.r,{fontWeight:"bold",color:"blue.600",fontSize:"2xl",children:"เพิ่มห้องใหม่"}),(0,t.jsx)(C.s,{color:"blue.400"}),(0,t.jsx)(z.c,{children:(0,t.jsxs)(p.r,{columns:{base:1,md:3},spacing:4,children:[(0,t.jsxs)(i.a,{bg:"white",borderRadius:"2xl",p:4,boxShadow:"md",border:"1.5px solid #e3f2fd",children:[(0,t.jsxs)(L.z,{mb:2,align:"center",children:[(0,t.jsx)(i.a,{as:A.rQ8,color:"blue.400"}),(0,t.jsx)(i.a,{fontWeight:700,color:"blue.600",fontSize:"md",children:"ข้อมูลห้อง"})]}),(0,t.jsxs)(i.a,{mb:2,children:[(0,t.jsx)(u.p,{mt:1,size:"md",placeholder:"เลขห้อง *",value:n,onChange:e=>c(e.target.value),bg:"gray.50",color:"gray.800",borderRadius:"lg",borderColor:"blue.100",_focus:{borderColor:"blue.400"}}),(0,t.jsx)(i.a,{fontSize:"xs",color:"gray.400",mt:1,children:"กรอกเลขห้อง เช่น 101"})]}),(0,t.jsxs)(i.a,{mb:2,children:[(0,t.jsx)(u.p,{mt:1,size:"md",placeholder:"ชื่อผู้เช่า *",value:d,onChange:e=>h(e.target.value),bg:"gray.50",color:"gray.800",borderRadius:"lg",borderColor:"blue.100",_focus:{borderColor:"blue.400"}}),(0,t.jsx)(i.a,{fontSize:"xs",color:"gray.400",mt:1,children:"กรอกชื่อผู้เช่า เช่น สมชาย ใจดี"})]}),(0,t.jsxs)(p.r,{columns:2,gap:2,mt:1,children:[(0,t.jsxs)(i.a,{children:[(0,t.jsx)(u.p,{size:"md",placeholder:"ค่าเช่า *",value:g,type:"number",onChange:e=>m(Number(e.target.value)),bg:"gray.50",color:"gray.800",borderRadius:"lg",borderColor:"blue.100",_focus:{borderColor:"blue.400"}}),(0,t.jsx)(i.a,{fontSize:"xs",color:"gray.400",mt:1,children:"บาท/เดือน"})]}),(0,t.jsxs)(i.a,{children:[(0,t.jsx)(u.p,{size:"md",placeholder:"ขนาดห้อง",value:b,type:"number",onChange:e=>j(Number(e.target.value)),bg:"gray.50",color:"gray.800",borderRadius:"lg",borderColor:"blue.100",_focus:{borderColor:"blue.400"}}),(0,t.jsx)(i.a,{fontSize:"xs",color:"gray.400",mt:1,children:"ตร.ม."})]})]}),(0,t.jsxs)(i.a,{mt:2,children:[(0,t.jsx)(u.p,{size:"md",placeholder:"วันที่บันทึก (DD/MM/YYYY) *",value:R?R.toISOString().split("T")[0]:"",onChange:e=>E(e.target.value?new Date(e.target.value):null),bg:"gray.50",color:"gray.800",borderRadius:"lg",borderColor:"blue.100",_focus:{borderColor:"blue.400"}}),(0,t.jsx)(i.a,{fontSize:"xs",color:"gray.400",mt:1,children:"วันที่เริ่มต้นสัญญา เช่น 25/12/2024"})]})]}),(0,t.jsxs)(i.a,{bg:"white",borderRadius:"2xl",p:4,boxShadow:"md",border:"1.5px solid #e3f2fd",children:[(0,t.jsxs)(L.z,{mb:2,align:"center",children:[(0,t.jsx)(i.a,{as:A.lHQ,color:"yellow.400"}),(0,t.jsx)(i.a,{fontWeight:700,color:"yellow.600",fontSize:"md",children:"ข้อมูลค่าไฟ"})]}),(0,t.jsxs)(p.r,{columns:2,gap:2,mt:1,children:[(0,t.jsxs)(i.a,{children:[(0,t.jsx)(u.p,{size:"md",placeholder:"มิเตอร์ไฟ (ปัจจุบัน)",value:O,type:"number",onChange:e=>K(Number(e.target.value)),bg:"gray.50",color:"gray.800",borderRadius:"lg",borderColor:"yellow.100",_focus:{borderColor:"yellow.400"}}),(0,t.jsx)(i.a,{fontSize:"xs",color:"gray.400",mt:1,children:"เลขที่เห็นบนมิเตอร์ล่าสุด"})]}),(0,t.jsxs)(i.a,{children:[(0,t.jsx)(u.p,{size:"md",placeholder:"มิเตอร์ไฟ (ก่อนหน้า)",value:null!=U?U:"",type:"number",onChange:e=>G(Number(e.target.value)),bg:"gray.50",color:"gray.800",borderRadius:"lg",borderColor:"yellow.100",_focus:{borderColor:"yellow.400"}}),(0,t.jsx)(i.a,{fontSize:"xs",color:"gray.400",mt:1,children:"เลขรอบก่อนหน้า"})]})]}),(0,t.jsxs)(p.r,{columns:2,gap:2,mt:1,children:[(0,t.jsxs)(i.a,{children:[(0,t.jsx)(u.p,{size:"md",placeholder:"ค่าไฟ/หน่วย",value:M,type:"number",onChange:e=>X(Number(e.target.value)),bg:"gray.50",color:"gray.800",borderRadius:"lg",borderColor:"yellow.100",_focus:{borderColor:"yellow.400"}}),(0,t.jsx)(i.a,{fontSize:"xs",color:"gray.400",mt:1,children:"บาท/หน่วย"})]}),(0,t.jsxs)(i.a,{children:[(0,t.jsx)(u.p,{size:"md",placeholder:"ยอดรวมค่าไฟ (ถ้ามี)",value:Y,type:"number",onChange:e=>Q(Number(e.target.value)),bg:"gray.50",color:"gray.800",borderRadius:"lg",borderColor:"yellow.100",_focus:{borderColor:"yellow.400"}}),(0,t.jsx)(i.a,{fontSize:"xs",color:"gray.400",mt:1,children:"ถ้าคำนวณไว้แล้ว"})]})]})]}),(0,t.jsxs)(i.a,{bg:"white",borderRadius:"2xl",p:4,boxShadow:"md",border:"1.5px solid #e3f2fd",children:[(0,t.jsxs)(L.z,{mb:2,align:"center",children:[(0,t.jsx)(i.a,{as:A.DFS,color:"cyan.400"}),(0,t.jsx)(i.a,{fontWeight:700,color:"cyan.600",fontSize:"md",children:"ข้อมูลค่าน้ำ"})]}),(0,t.jsxs)(p.r,{columns:2,gap:2,mt:1,children:[(0,t.jsxs)(i.a,{children:[(0,t.jsx)(u.p,{size:"md",placeholder:"มิเตอร์น้ำ (ปัจจุบัน)",value:N,type:"number",onChange:e=>k(Number(e.target.value)),bg:"gray.50",color:"gray.800",borderRadius:"lg",borderColor:"cyan.100",_focus:{borderColor:"cyan.400"}}),(0,t.jsx)(i.a,{fontSize:"xs",color:"gray.400",mt:1,children:"เลขที่เห็นบนมิเตอร์ล่าสุด"})]}),(0,t.jsxs)(i.a,{children:[(0,t.jsx)(u.p,{size:"md",placeholder:"มิเตอร์น้ำ (ก่อนหน้า)",value:null!=D?D:"",type:"number",onChange:e=>F(Number(e.target.value)),bg:"gray.50",color:"gray.800",borderRadius:"lg",borderColor:"cyan.100",_focus:{borderColor:"cyan.400"}}),(0,t.jsx)(i.a,{fontSize:"xs",color:"gray.400",mt:1,children:"เลขรอบก่อนหน้า"})]})]}),(0,t.jsxs)(p.r,{columns:2,gap:2,mt:1,children:[(0,t.jsxs)(i.a,{children:[(0,t.jsx)(u.p,{size:"md",placeholder:"ค่าน้ำ/หน่วย",value:W,type:"number",onChange:e=>B(Number(e.target.value)),bg:"gray.50",color:"gray.800",borderRadius:"lg",borderColor:"cyan.100",_focus:{borderColor:"cyan.400"}}),(0,t.jsx)(i.a,{fontSize:"xs",color:"gray.400",mt:1,children:"บาท/หน่วย"})]}),(0,t.jsxs)(i.a,{children:[(0,t.jsx)(u.p,{size:"md",placeholder:"ยอดรวมค่าน้ำ (ถ้ามี)",value:H,type:"number",onChange:e=>$(Number(e.target.value)),bg:"gray.50",color:"gray.800",borderRadius:"lg",borderColor:"cyan.100",_focus:{borderColor:"cyan.400"}}),(0,t.jsx)(i.a,{fontSize:"xs",color:"gray.400",mt:1,children:"ถ้าคำนวณไว้แล้ว"})]})]})]}),(0,t.jsxs)(i.a,{bg:"white",borderRadius:"2xl",p:4,boxShadow:"md",border:"1.5px solid #e3f2fd",gridColumn:{md:"1 / span 3"},children:[(0,t.jsxs)(L.z,{mb:2,align:"center",children:[(0,t.jsx)(i.a,{as:A.bfZ,color:"pink.400"}),(0,t.jsx)(i.a,{fontWeight:700,color:"pink.600",fontSize:"md",children:"วันครบกำหนดชำระ"})]}),(0,t.jsxs)(i.a,{mb:2,children:[(0,t.jsx)(u.p,{size:"md",mt:1,placeholder:"วันที่ครบกำหนด (DD/MM/YYYY)",value:I?I.toISOString().split("T")[0]:"",onChange:e=>T(e.target.value?new Date(e.target.value):null),bg:"gray.50",color:"gray.800",borderRadius:"lg",borderColor:"pink.100",_focus:{borderColor:"pink.400"}}),(0,t.jsx)(i.a,{fontSize:"xs",color:"gray.400",mt:1,children:"วันที่ต้องชำระเงิน เช่น 31/12/2024"})]}),(0,t.jsxs)(L.z,{mt:2,mb:1,align:"center",children:[(0,t.jsx)(i.a,{as:A.OiG,color:"green.400"}),(0,t.jsx)(i.a,{fontWeight:700,color:"green.600",fontSize:"md",children:"ค่าบริการเสริม"})]}),J.map((e,r)=>(0,t.jsxs)(L.z,{spacing:2,align:"center",mt:1,children:[(0,t.jsx)(u.p,{size:"md",placeholder:"ชื่อบริการ เช่น ที่จอดรถ",value:e.label,onChange:e=>Z(r,"label",e.target.value),bg:"gray.50",color:"gray.800",borderRadius:"lg",borderColor:"green.100",_focus:{borderColor:"green.400"}}),(0,t.jsx)(u.p,{size:"md",placeholder:"จำนวนเงิน",type:"number",value:e.value,onChange:e=>Z(r,"value",Number(e.target.value)),bg:"gray.50",color:"gray.800",borderRadius:"lg",borderColor:"green.100",_focus:{borderColor:"green.400"}}),(0,t.jsx)(P.J,{onClick:()=>q(r)})]},r)),(0,t.jsx)(x.$,{leftIcon:(0,t.jsx)(A.OiG,{}),colorScheme:"green",variant:"outline",size:"md",mt:2,borderRadius:"xl",fontFamily:"Kanit",fontWeight:"medium",onClick:()=>{V([...J,{label:"",value:0}])},children:"เพิ่มบริการเสริม"})]})]})}),(0,t.jsxs)(w.j,{children:[(0,t.jsx)(x.$,{colorScheme:"blue",mr:3,onClick:()=>{a({id:n,status:"occupied",tenantName:d,area:b,waterCurrent:N,waterPrev:D,waterRate:W,waterTotal:H,elecCurrent:O,elecPrev:U,elecRate:M,elecTotal:Y,extraServices:J}),c(""),h(""),m(0),j(0),E(null),T(null),k(0),F(void 0),B(0),$(0),K(0),G(void 0),X(0),Q(0),V([]),l()},size:"md",borderRadius:"xl",fontFamily:"Kanit",fontWeight:"bold",children:"เพิ่ม"}),(0,t.jsx)(x.$,{variant:"ghost",onClick:l,size:"md",borderRadius:"xl",fontFamily:"Kanit",children:"ยกเลิก"})]})]})]})}var O=l(9099);l(9473),l(7085);var K=l(1362),U=l(3869),G=l(6676),M=l(8745);function X(e){let{isOpen:r,onClose:l,onSave:a,initialRoom:o}=e;if(!o)return null;let[s,n]=(0,_.useState)(o.id),[i,c]=(0,_.useState)(o.tenantName),[d,h]=(0,_.useState)(o.area),[g,m]=(0,_.useState)(o.latestTotal),[b,j]=(0,_.useState)(o.electricity),[R,E]=(0,_.useState)(o.water),[I,T]=(0,_.useState)(o.rent),[N,D]=(0,_.useState)(o.service),[F,W]=(0,_.useState)(o.overdueDays),[B,H]=(0,_.useState)(o.status),[$,O]=(0,_.useState)(o.extraServices||[]);(0,_.useEffect)(()=>{n(o.id),c(o.tenantName),h(o.area),m(o.latestTotal),j(o.electricity),E(o.water),T(o.rent),D(o.service),W(o.overdueDays),H(o.status),Array.isArray(o.extraServices)?O(o.extraServices):O([])},[o,r]);let X=(e,r,l)=>{O(t=>t.map((t,a)=>a===e?{...t,[r]:l}:t))},Y=e=>{O(r=>r.filter((r,l)=>l!==e))};return(0,t.jsxs)(f.aF,{isOpen:r,onClose:l,isCentered:!0,size:"xl",children:[(0,t.jsx)(y.m,{}),(0,t.jsxs)(S.$,{borderRadius:"2xl",p:2,maxH:"95vh",overflowY:"auto",minW:{base:"95vw",md:"520px"},children:[(0,t.jsxs)(v.r,{display:"flex",alignItems:"center",gap:2,color:"blue.600",fontWeight:"bold",children:[(0,t.jsx)(k.I,{as:A.Pcn})," แก้ไขข้อมูลห้องพัก"]}),(0,t.jsx)(C.s,{}),(0,t.jsxs)(z.c,{children:[(0,t.jsx)("div",{style:{color:"#64748b",fontSize:14,marginBottom:8},children:"ปรับข้อมูลห้อง, ผู้เช่า, ค่าเช่า และบริการต่าง ๆ ได้ที่นี่"}),(0,t.jsxs)(p.r,{columns:{base:1,md:2},spacing:4,alignItems:"flex-start",children:[(0,t.jsxs)(K.T,{spacing:2,align:"stretch",children:[(0,t.jsx)("label",{style:{fontWeight:500,color:"#2563eb"},children:"ข้อมูลห้อง"}),(0,t.jsx)("label",{children:"เลขห้อง"}),(0,t.jsx)(u.p,{placeholder:"เช่น 101",value:s,onChange:e=>n(e.target.value),size:"md"}),(0,t.jsx)("label",{children:"ขนาด (ตร.ม.)"}),(0,t.jsx)(u.p,{placeholder:"เช่น 28",type:"number",value:d,onChange:e=>h(Number(e.target.value)),size:"md"}),(0,t.jsxs)(U.MJ,{display:"flex",alignItems:"center",mt:2,mb:2,children:[(0,t.jsx)(G.l,{htmlFor:"status-toggle",mb:"0",fontWeight:500,color:"#2563eb",children:"สถานะห้อง"}),(0,t.jsx)(M.d,{id:"status-toggle",colorScheme:"green",isChecked:"occupied"===B,onChange:e=>H(e.target.checked?"occupied":"vacant"),mr:2}),(0,t.jsx)("span",{style:{color:"occupied"===B?"#16a34a":"#64748b",fontWeight:500},children:"occupied"===B?"มีคนอยู่":"ว่าง"})]}),(0,t.jsx)("label",{style:{fontWeight:500,color:"#2563eb",marginTop:8},children:"ข้อมูลผู้เช่า"}),(0,t.jsx)("label",{children:"ชื่อผู้เช่า"}),(0,t.jsx)(u.p,{placeholder:"เช่น สมชาย ใจดี",value:i,onChange:e=>c(e.target.value),size:"md"})]}),(0,t.jsxs)(K.T,{spacing:2,align:"stretch",children:[(0,t.jsx)("label",{style:{fontWeight:500,color:"#2563eb"},children:"ค่าใช้จ่ายหลัก"}),(0,t.jsx)("label",{children:"ยอดรวม"}),(0,t.jsx)(u.p,{placeholder:"ยอดรวมทั้งหมด",type:"number",value:g,onChange:e=>m(Number(e.target.value)),size:"md"}),(0,t.jsx)("label",{children:"ค่าไฟฟ้า"}),(0,t.jsx)(u.p,{placeholder:"เช่น 350",type:"number",value:b,onChange:e=>j(Number(e.target.value)),size:"md"}),(0,t.jsx)("label",{children:"ค่าน้ำ"}),(0,t.jsx)(u.p,{placeholder:"เช่น 100",type:"number",value:R,onChange:e=>E(Number(e.target.value)),size:"md"}),(0,t.jsx)("label",{children:"ค่าเช่า"}),(0,t.jsx)(u.p,{placeholder:"เช่น 5000",type:"number",value:I,onChange:e=>T(Number(e.target.value)),size:"md"}),(0,t.jsxs)("label",{children:["ค่าบริการ (รวม)",(0,t.jsx)("span",{style:{color:"#64748b",fontWeight:400,fontSize:12,marginLeft:4},children:"(ถ้ามีบริการเสริมให้เพิ่มด้านล่าง)"})]}),(0,t.jsx)(u.p,{placeholder:"เช่น 300",type:"number",value:N,onChange:e=>D(Number(e.target.value)),size:"md"}),(0,t.jsx)("label",{children:"วันค้างชำระ"}),(0,t.jsx)(u.p,{placeholder:"เช่น 0",type:"number",value:F,onChange:e=>W(Number(e.target.value)),size:"md"}),(0,t.jsx)("label",{style:{fontWeight:500,color:"#2563eb",marginTop:8},children:"บริการเสริม"}),$.map((e,r)=>(0,t.jsxs)(L.z,{spacing:2,align:"center",children:[(0,t.jsx)(u.p,{placeholder:"ชื่อบริการ เช่น ที่จอดรถ",value:e.label,onChange:e=>X(r,"label",e.target.value),size:"md"}),(0,t.jsx)(u.p,{placeholder:"จำนวนเงิน",type:"number",value:e.value,onChange:e=>X(r,"value",Number(e.target.value)),size:"md"}),(0,t.jsx)(P.J,{onClick:()=>Y(r)})]},r)),(0,t.jsx)(x.$,{onClick:()=>{O([...$,{label:"",value:0}])},colorScheme:"teal",variant:"outline",size:"md",borderRadius:"xl",mt:1,alignSelf:"flex-start",fontFamily:"Kanit",fontWeight:"medium",children:"+ เพิ่มบริการเสริม"})]})]})]}),(0,t.jsxs)(w.j,{children:[(0,t.jsx)(x.$,{colorScheme:"blue",mr:3,onClick:()=>{a({id:s,status:B,tenantName:i,area:d,latestTotal:g,electricity:b,water:R,rent:I,service:N,overdueDays:F,extraServices:$})},borderRadius:"xl",px:6,fontWeight:"bold",fontFamily:"Kanit",size:"md",children:"บันทึก"}),(0,t.jsx)(x.$,{onClick:l,borderRadius:"xl",fontFamily:"Kanit",size:"md",children:"ยกเลิก"})]})]})]})}var Y=l(4312),Q=l(9917),J=l(6447);function V(){let[e,r]=(0,_.useState)([]),[l,k]=(0,_.useState)(!0),[D,F]=(0,_.useState)(null),[W,B]=(0,_.useState)(!1),{isOpen:L,onOpen:P,onClose:K}=(0,a.j)(),U=(0,_.useRef)(null),G=(0,o.d)(),M=(0,O.useRouter)();(0,_.useRef)(null);let[V,Z]=(0,_.useState)(!1),[q,ee]=(0,_.useState)(!1),[er,el]=(0,_.useState)(!1),[et,ea]=(0,_.useState)(!1),[eo,es]=(0,_.useState)(null),[en,ei]=(0,_.useState)([]),[ec,ed]=(0,_.useState)(!1),[ex,eu]=(0,_.useState)(null),[eh,eg]=(0,_.useState)(void 0),[em,eb]=(0,_.useState)(void 0),[ej,ep]=(0,_.useState)({}),[ef,ey]=(0,_.useState)(""),[eS,ev]=(0,_.useState)("all"),[eC,ez]=(0,_.useState)(""),[ew,eR]=(0,_.useState)([{name:"เตียง",selected:!0},{name:"ที่นอน",selected:!0},{name:"โต๊ะทำงาน",selected:!0},{name:"เก้าอี้",selected:!0},{name:"ตู้เสื้อผ้า",selected:!0},{name:"เครื่องปรับอากาศ",selected:!0},{name:"พัดลม",selected:!1},{name:"โคมไฟ",selected:!0},{name:"ผ้าม่าน",selected:!0},{name:"เครื่องทำน้ำอุ่น",selected:!0}]),[eE,eI]=(0,_.useState)(null),[e_,eT]=(0,_.useState)(null),[eN,ek]=(0,_.useState)(null);(0,_.useEffect)(()=>{let e=(0,Q.hg)(T.j,async e=>{if(!e)return void M.replace("/login");eT(e.uid),ek(e.email);let r=await (0,N.x7)((0,N.H9)(T.db,"users",e.uid)),l=r.exists()?r.data().role:"user";eI(l),"admin"===l||"owner"===l||M.replace("/dashboard")});return()=>e()},[]),(0,_.useEffect)(()=>{(async()=>{k(!0);try{let e=(await (0,N.GG)((0,N.rJ)(T.db,"rooms"))).docs.map(e=>{let r=e.data();return{id:e.id,status:r.status||"occupied",tenantName:r.tenantName||"-",area:r.area||0,latestTotal:r.latestTotal||0,electricity:r.electricity||0,water:r.water||0,rent:r.rent||0,service:r.service||0,extraServices:r.extraServices||[],overdueDays:r.overdueDays||0,billStatus:r.billStatus||"paid",tenantId:r.tenantId||null,tenantEmail:r.tenantEmail||null}}),l={};for(let r of e){let e=(0,N.P)((0,N.rJ)(T.db,"bills"),(0,N._M)("roomId","==",r.id),(0,N.My)("createdAt","desc"),(0,N.AB)(1)),t=await (0,N.GG)(e);if(!t.empty){let e=t.docs[0].data();l[r.id]=e}}r(e),ep(l)}catch(e){console.error(e),G({title:"โหลดข้อมูลล้มเหลว",status:"error"}),r([]),ep({})}finally{k(!1)}})()},[G]);let eD=e=>{F(e),B(!0)},eF=async()=>{if(D)try{await (0,N.kd)((0,N.H9)(T.db,"rooms",D)),r(e=>e.filter(e=>e.id!==D)),G({title:"ลบห้องสำเร็จ",status:"success"})}catch(e){G({title:"ลบห้องไม่สำเร็จ",status:"error"})}finally{B(!1),F(null)}},eW=async e=>{try{let l={id:e.id,status:e.status||"occupied",tenantName:e.tenantName,area:e.area,latestTotal:(e.elecTotal||0)+(e.waterTotal||0)+(e.rent||0)+(e.service||0),electricity:e.elecTotal||0,water:e.waterTotal||0,rent:e.rent||0,service:e.service||0,overdueDays:0,billStatus:"paid",tenantId:e.tenantId||null,tenantEmail:e.tenantEmail||null};await (0,N.BN)((0,N.H9)(T.db,"rooms",l.id),l),r(e=>[...e,l]),G({title:"เพิ่มห้องใหม่สำเร็จ",status:"success"})}catch(e){G({title:"เพิ่มห้องใหม่ไม่สำเร็จ",status:"error"})}K()},eA=e=>{M.push("/bill/".concat(e))},eB=e=>{M.push("/history/".concat(e))},eH=r=>{let l=e.find(e=>e.id===r);l&&eu(l)},eL=async e=>{try{await (0,N.BN)((0,N.H9)(T.db,"rooms",e.id),{...e,billStatus:e.billStatus||"paid"}),r(r=>r.map(r=>r.id===e.id?{...r,...e}:r)),G({title:"บันทึกข้อมูลห้องสำเร็จ",status:"success"})}catch(e){G({title:"บันทึกข้อมูลห้องไม่สำเร็จ",status:"error"})}eu(null)},eP=async()=>{if(!eC)return void G({title:"กรุณาเลือกห้อง",status:"warning"});let r=e.find(e=>e.id===eC);if(!r)return void G({title:"ไม่พบข้อมูลห้อง",status:"error"});let l=ew.filter(e=>e.selected);if(0===l.length)return void G({title:"กรุณาเลือกอุปกรณ์อย่างน้อย 1 รายการ",status:"warning"});try{let e=await fetch("/Kanit-Regular.ttf"),t=await e.arrayBuffer(),a=btoa(new Uint8Array(t).reduce((e,r)=>e+String.fromCharCode(r),"")),o=new Y.default;o.addFileToVFS("Kanit-Regular.ttf",a),o.addFont("Kanit-Regular.ttf","Kanit","normal"),o.setFont("Kanit"),o.setFontSize(20),o.setTextColor(41,128,185),o.text("ใบประเมินสภาพห้องและอุปกรณ์",105,20,{align:"center"}),o.setFontSize(12),o.setTextColor(52,73,94),o.text("หมายเลขห้อง: ".concat(r.id),20,40),o.text("ผู้เช่า: ".concat(r.tenantName||"ว่าง"),20,50),o.text("วันที่ประเมิน: ".concat(new Date().toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric"})),130,40),o.setFillColor(236,240,241),o.rect(15,65,180,10,"F"),o.setTextColor(44,62,80),o.setFontSize(10),o.text("ลำดับ",18,72),o.text("รายการอุปกรณ์",35,72),o.text("สภาพ",110,72),o.text("หมายเหตุ",165,72),o.text("ดี",112,72),o.text("พอใช้",128,72),o.text("ชำรุด",145,72),o.setTextColor(52,73,94),o.setFontSize(10);let s=75;l.forEach((e,r)=>{(s+=10)>260&&(o.addPage(),s=20),o.text("".concat(r+1,"."),18,s),o.text(e.name,35,s),o.rect(112,s-4,5,5),o.rect(128,s-4,5,5),o.rect(145,s-4,5,5),o.line(165,s+1,195,s+1)});let n=s+30>240?20:s+30;20===n&&o.addPage(),o.setFontSize(12),o.setTextColor(44,62,80),o.text("ลงชื่อผู้ประเมิน:",20,n),o.text("ลงชื่อผู้เช่า:",110,n),o.setLineWidth(.2),o.line(20,n+15,80,n+15),o.line(110,n+15,170,n+15),o.setFontSize(10),o.text("(.................................................)",20,n+20),o.text("(.................................................)",110,n+20),o.text("วันที่: .................................",20,n+30),o.text("วันที่: .................................",110,n+30),o.setFontSize(8),o.setTextColor(127,140,141),o.text("เอกสารฉบับนี้ใช้เพื่อยืนยันสภาพอุปกรณ์ ณ วันที่เข้าพัก โปรดตรวจสอบอย่างละเอียด",105,285,{align:"center"});let i="equipment-assessment-room-".concat(eC,"-").concat(new Date().toISOString().split("T")[0],".pdf");o.save(i),G({title:"ดาวน์โหลดใบประเมินสำเร็จ",status:"success"}),ea(!1),ez("")}catch(e){console.error("Error generating PDF:",e),G({title:"เกิดข้อผิดพลาดในการสร้าง PDF",description:"ไม่สามารถโหลดฟอนต์ได้",status:"error"})}},e$=e.filter(e=>!!eE&&("admin"===eE||"owner"===eE&&(!!e.tenantId&&!!e_&&e.tenantId===e_||!!e.tenantEmail&&!!eN&&e.tenantEmail===eN)||!1)).filter(e=>{let r=e.id.toLowerCase().includes(ef.trim().toLowerCase())||e.tenantName.toLowerCase().includes(ef.trim().toLowerCase()),l=!0;return"unpaid"===eS?l="unpaid"===e.billStatus:"vacant"===eS&&(l="vacant"===e.status),r&&l});return null===eE?(0,t.jsx)(s.o,{minH:"100vh",children:(0,t.jsx)(n.y,{color:"blue.400"})}):"admin"!==eE&&"owner"!==eE?null:(0,t.jsxs)(J.A,{role:eE,children:[(0,t.jsxs)(i.a,{flex:1,p:[2,4,8],children:[(0,t.jsxs)(c.s,{align:"center",mb:6,gap:3,flexWrap:"wrap",children:[(0,t.jsx)(d.E,{fontWeight:"bold",fontSize:["xl","2xl"],color:"gray.700",mr:4,children:"Rooms"}),"admin"===eE&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.$,{leftIcon:(0,t.jsx)(A.OiG,{}),colorScheme:"blue",variant:"solid",borderRadius:"xl",onClick:()=>Z(!0),children:"เพิ่มห้อง"}),(0,t.jsx)(x.$,{leftIcon:(0,t.jsx)(A.HVe,{}),colorScheme:"teal",variant:"outline",borderRadius:"xl",onClick:()=>el(!0),children:"นำเข้า CSV"}),(0,t.jsx)(x.$,{leftIcon:(0,t.jsx)(A.kl1,{}),colorScheme:"purple",variant:"outline",borderRadius:"xl",onClick:()=>{ea(!0)},children:"ใบประเมินอุปกรณ์"})]}),(0,t.jsx)(u.p,{placeholder:"Enter room NO.",maxW:"220px",bg:"white",borderRadius:"xl",mr:2,value:ef,onChange:e=>ey(e.target.value)}),(0,t.jsxs)(h.W,{children:[(0,t.jsx)(g.I,{as:m.K,"aria-label":"Filter",icon:(0,t.jsx)(A.YsJ,{}),variant:"outline",borderRadius:"xl"}),(0,t.jsxs)(b.c,{children:[(0,t.jsx)(j.D,{onClick:()=>ev("all"),children:"แสดงทั้งหมด"}),(0,t.jsx)(j.D,{onClick:()=>ev("unpaid"),children:"ห้องที่ยังไม่จ่าย"}),(0,t.jsx)(j.D,{onClick:()=>ev("vacant"),children:"ห้องว่าง"})]})]})]}),(0,t.jsx)(p.r,{minChildWidth:"260px",spacing:0,children:e$.map(e=>{var r,l;let a=(null==(r=ej[e.id])?void 0:r.electricityTotal)||e.electricity||0,o=(null==(l=ej[e.id])?void 0:l.waterTotal)||e.water||0,s=e.rent||0,n=(e.service||0)+(Array.isArray(e.extraServices)?e.extraServices.reduce((e,r)=>e+Number(r.value||0),0):0);return(0,t.jsx)(H,{...e,latestTotal:a+o+s+n,electricity:a,water:o,rent:s,service:n,onDelete:()=>eD(e.id),onViewBill:()=>eA(e.id),onAddData:()=>eB(e.id),onSettings:()=>eH(e.id)},e.id)})})]}),(0,t.jsx)($,{isOpen:V,onClose:()=>Z(!1),onAdd:eW}),(0,t.jsxs)(f.aF,{isOpen:q,onClose:()=>ee(!1),children:[(0,t.jsx)(y.m,{}),(0,t.jsxs)(S.$,{children:[(0,t.jsx)(v.r,{children:"เพิ่มข้อมูลห้องทั้งหมด"}),(0,t.jsx)(C.s,{}),(0,t.jsx)(z.c,{children:"ฟีเจอร์นี้อยู่ระหว่างพัฒนา (mockup)"}),(0,t.jsx)(w.j,{children:(0,t.jsx)(x.$,{colorScheme:"blue",mr:3,onClick:()=>ee(!1),children:"ปิด"})})]})]}),(0,t.jsxs)(f.aF,{isOpen:er,onClose:()=>el(!1),children:[(0,t.jsx)(y.m,{}),(0,t.jsxs)(S.$,{children:[(0,t.jsx)(v.r,{children:"นำเข้า CSV"}),(0,t.jsx)(C.s,{}),(0,t.jsx)(z.c,{children:"ฟีเจอร์นี้อยู่ระหว่างพัฒนา (mockup)"}),(0,t.jsx)(w.j,{children:(0,t.jsx)(x.$,{colorScheme:"blue",mr:3,onClick:()=>el(!1),children:"ปิด"})})]})]}),(0,t.jsxs)(f.aF,{isOpen:et,onClose:()=>ea(!1),children:[(0,t.jsx)(y.m,{}),(0,t.jsxs)(S.$,{children:[(0,t.jsx)(v.r,{children:"ดาวน์โหลดไฟล์ประเมินอุปกรณ์"}),(0,t.jsx)(C.s,{}),(0,t.jsxs)(z.c,{children:[(0,t.jsx)(d.E,{mb:2,fontWeight:"bold",children:"เลือกห้อง"}),(0,t.jsx)(R.l,{placeholder:"เลือกห้อง",value:eC,onChange:e=>ez(e.target.value),mb:4,children:e.map(e=>(0,t.jsxs)("option",{value:e.id,children:["ห้อง ",e.id," (",e.tenantName,")"]},e.id))}),(0,t.jsx)(d.E,{mb:2,fontWeight:"bold",children:"เลือกรายการอุปกรณ์"}),(0,t.jsx)(p.r,{columns:2,spacing:2,children:ew.map((e,r)=>(0,t.jsx)(E.S,{isChecked:e.selected,onChange:e=>{let l=[...ew];l[r].selected=e.target.checked,eR(l)},children:e.name},e.name))})]}),(0,t.jsxs)(w.j,{children:[(0,t.jsx)(x.$,{variant:"ghost",mr:3,onClick:()=>ea(!1),children:"ยกเลิก"}),(0,t.jsx)(x.$,{colorScheme:"blue",onClick:eP,disabled:!eC,children:"ดาวน์โหลด"})]})]})]}),ex&&(0,t.jsx)(X,{isOpen:!!ex,initialRoom:ex,onClose:()=>eu(null),onSave:e=>eL({...ex,...e})}),(0,t.jsxs)(I.Lt,{isOpen:W,leastDestructiveRef:U,onClose:()=>B(!1),children:[(0,t.jsx)(y.m,{}),(0,t.jsxs)(I.EO,{children:[(0,t.jsx)(v.r,{fontSize:"lg",fontWeight:"bold",children:"ยืนยันการลบห้อง"}),(0,t.jsx)(z.c,{children:"คุณแน่ใจหรือไม่ว่าต้องการลบห้องนี้? การลบจะไม่สามารถย้อนกลับได้"}),(0,t.jsxs)(w.j,{children:[(0,t.jsx)(x.$,{ref:U,onClick:()=>B(!1),children:"ยกเลิก"}),(0,t.jsx)(x.$,{colorScheme:"red",onClick:eF,ml:3,children:"ลบ"})]})]})]})]})}},2508:(e,r,l)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/rooms",function(){return l(1150)}])},3611:(e,r,l)=>{"use strict";l.d(r,{db:()=>x,j:()=>d});var t=l(6042),a=l(9917),o=l(2964),s=l(5226),n=l(5364);let i={apiKey:n.env.NEXT_PUBLIC_FIREBASE_API_KEY||"AIzaSyDtZQ_gX9xWqGQgxQMBzTH8c9o6t-ZsvKc",authDomain:n.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN||"raoteebaan.firebaseapp.com",databaseURL:n.env.NEXT_PUBLIC_FIREBASE_DATABASE_URL||"https://raoteebaan-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:n.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID||"raoteebaan",storageBucket:n.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET||"raoteebaan.appspot.com",messagingSenderId:n.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID||"986271509277",appId:n.env.NEXT_PUBLIC_FIREBASE_APP_ID||"1:986271509277:web:ff35142f2eabe2063c0ff4",measurementId:n.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID||"G-YW7ZP3B4TC"},c=(0,t.Dk)().length?(0,t.Dk)()[0]:(0,t.Wp)(i),d=(0,a.xI)(c),x=(0,o.aU)(c);(0,s.c7)(c)},6447:(e,r,l)=>{"use strict";l.d(r,{A:()=>m});var t=l(7876),a=l(9955),o=l(9803),s=l(8619),n=l(5812),i=l(8230),c=l.n(i),d=l(9099),x=l(2870);function u(e){let{role:r}=e,l=(0,d.useRouter)();return(0,t.jsxs)(a.a,{w:["70px","220px"],minH:"calc(100vh - 64px)",bg:"white",borderRight:"1.5px solid #e3f2fd",boxShadow:"0 2px 16px 0 rgba(33,150,243,0.06)",px:[1,4],py:6,display:"flex",flexDirection:"column",gap:4,zIndex:2,children:["admin"===r&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c(),{href:"/dashboard",passHref:!0,legacyBehavior:!0,children:(0,t.jsx)(n.$,{as:"a",leftIcon:(0,t.jsx)(x.rQ8,{}),colorScheme:"blue",variant:"/dashboard"===l.pathname?"solid":"ghost",borderRadius:"xl",fontWeight:"bold",mb:2,w:"full",justifyContent:"flex-start",children:"Dashboard"})}),(0,t.jsx)(c(),{href:"/rooms",passHref:!0,legacyBehavior:!0,children:(0,t.jsx)(n.$,{as:"a",leftIcon:(0,t.jsx)(x.rQ8,{}),colorScheme:"blue",variant:"/rooms"===l.pathname?"solid":"ghost",borderRadius:"xl",fontWeight:"bold",mb:2,w:"full",justifyContent:"flex-start",children:"Rooms"})}),(0,t.jsx)(c(),{href:"/inbox",passHref:!0,legacyBehavior:!0,children:(0,t.jsx)(n.$,{as:"a",leftIcon:(0,t.jsx)(x.opL,{}),colorScheme:"gray",variant:"/inbox"===l.pathname?"solid":"ghost",borderRadius:"xl",mb:2,w:"full",justifyContent:"flex-start",children:"Inbox"})}),(0,t.jsx)(c(),{href:"/parcel",passHref:!0,legacyBehavior:!0,children:(0,t.jsx)(n.$,{as:"a",leftIcon:(0,t.jsx)(x.TXh,{}),colorScheme:"gray",variant:"/parcel"===l.pathname?"solid":"ghost",borderRadius:"xl",mb:2,w:"full",justifyContent:"flex-start",children:"Parcel"})}),(0,t.jsx)(c(),{href:"/employee",passHref:!0,legacyBehavior:!0,children:(0,t.jsx)(n.$,{as:"a",leftIcon:(0,t.jsx)(x.M5n,{}),colorScheme:"gray",variant:"/employee"===l.pathname?"solid":"ghost",borderRadius:"xl",mb:8,w:"full",justifyContent:"flex-start",children:"Employee"})})]}),"owner"===r&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c(),{href:"/rooms",passHref:!0,legacyBehavior:!0,children:(0,t.jsx)(n.$,{as:"a",leftIcon:(0,t.jsx)(x.rQ8,{}),colorScheme:"blue",variant:"/rooms"===l.pathname?"solid":"ghost",borderRadius:"xl",fontWeight:"bold",mb:2,w:"full",justifyContent:"flex-start",children:"Rooms"})}),(0,t.jsx)(c(),{href:"/inbox",passHref:!0,legacyBehavior:!0,children:(0,t.jsx)(n.$,{as:"a",leftIcon:(0,t.jsx)(x.opL,{}),colorScheme:"gray",variant:"/inbox"===l.pathname?"solid":"ghost",borderRadius:"xl",mb:2,w:"full",justifyContent:"flex-start",children:"Inbox"})}),(0,t.jsx)(c(),{href:"/parcel",passHref:!0,legacyBehavior:!0,children:(0,t.jsx)(n.$,{as:"a",leftIcon:(0,t.jsx)(x.TXh,{}),colorScheme:"gray",variant:"/parcel"===l.pathname?"solid":"ghost",borderRadius:"xl",mb:8,w:"full",justifyContent:"flex-start",children:"Parcel"})})]})]})}var h=l(3042),g=l(9865);function m(e){let{children:r,role:l}=e;return(0,t.jsxs)(a.a,{minH:"100vh",children:[(0,t.jsx)(s.A,{}),(0,t.jsxs)(o.s,{minH:"100vh",p:0,children:[(0,t.jsx)(u,{role:l}),(0,t.jsx)(h.N,{mode:"wait",children:(0,t.jsx)(g.P.div,{initial:{opacity:0,y:24},animate:{opacity:1,y:0},exit:{opacity:0,y:-24},transition:{duration:.35,ease:"easeInOut"},style:{flex:1},children:r},window.location.pathname)})]})]})}},8619:(e,r,l)=>{"use strict";l.d(r,{A:()=>m});var t=l(7876),a=l(9803),o=l(1921),s=l(7365),n=l(3782),i=l(9955),c=l(485),d=l(2870),x=l(9099),u=l(4232),h=l(3611),g=l(2964);function m(e){let{user:r}=e,l=(0,x.useRouter)(),[m,b]=(0,u.useState)({name:(null==r?void 0:r.name)||"xxx",avatar:null==r?void 0:r.avatar,greeting:null==r?void 0:r.greeting}),[j,p]=(0,u.useState)(null);return(0,u.useEffect)(()=>{let e=h.j.currentUser;e?(b({name:e.displayName||(null==r?void 0:r.name)||"xxx",avatar:e.photoURL||(null==r?void 0:r.avatar),greeting:new Date().toLocaleString("th-TH",{dateStyle:"full",timeStyle:"short"})}),(0,g.x7)((0,g.H9)(h.db,"users",e.uid)).then(e=>{p(e.exists()?e.data().role:"user")})):(b({name:(null==r?void 0:r.name)||"xxx",avatar:null==r?void 0:r.avatar,greeting:new Date().toLocaleString("th-TH",{dateStyle:"full",timeStyle:"short"})}),p(null))},[r]),(0,t.jsxs)(a.s,{as:"header",w:"full",px:[2,4,8],py:[2,3],align:"center",bg:"whiteAlpha.800",borderRadius:"2xl",boxShadow:"0 4px 24px 0 rgba(33, 150, 243, 0.10)",mt:[2,4],mb:[4,8],maxW:"100vw",minH:"64px",position:"relative",zIndex:10,style:{backdropFilter:"blur(12px)"},border:"1.5px solid #e3f2fd",children:[(0,t.jsx)(o.E,{fontWeight:"extrabold",fontSize:["lg","2xl"],color:"blue.500",mr:6,letterSpacing:1,children:"TeeRao"}),(0,t.jsx)(s.h,{}),(0,t.jsxs)(a.s,{align:"center",gap:3,children:[(0,t.jsx)(n.e,{size:"md",name:m.name||"",src:m.avatar,border:"2.5px solid white",boxShadow:"md",bg:"blue.100",color:"blue.700",cursor:"pointer",onClick:()=>l.push("/profile")}),(0,t.jsxs)(i.a,{textAlign:"left",cursor:"pointer",onClick:()=>l.push("/profile"),children:[(0,t.jsxs)(o.E,{fontWeight:"bold",fontSize:"md",color:"gray.800",children:["สวัสดีคุณ ",m.name||"xxx"]}),(0,t.jsx)(o.E,{fontSize:"xs",color:"gray.400",children:m.greeting||"อาทิตย์ 21 มิ.ย. 2568"})]}),"admin"===j&&(0,t.jsx)(c.K,{"aria-label":"Settings",icon:(0,t.jsx)(d.Pcn,{}),variant:"ghost",fontSize:"xl",color:"blue.500",_hover:{bg:"blue.50",color:"blue.600"},borderRadius:"full",onClick:()=>l.push("/admin-users")}),(0,t.jsx)(c.K,{"aria-label":"Notifications",icon:(0,t.jsx)(d.jNV,{}),variant:"ghost",fontSize:"xl",color:"blue.500",_hover:{bg:"blue.50",color:"blue.600"},borderRadius:"full"})]})]})}}},e=>{var r=r=>e(e.s=r);e.O(0,[671,871,347,465,169,981,71,936,511,636,593,792],()=>r(2508)),_N_E=e.O()}]);